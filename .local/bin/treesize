#!/usr/bin/env php
<?php 

class TreeSize
{
	static function run( array $args )
	{
		array_shift( $args );

		foreach ( $args as $arg )
			self::scan( $arg );
	}

	static function scan( $dir )
	{
		$total = 1;

		if ( is_dir( $dir ) && !is_link( $dir ) )
		{
			foreach ( scandir( $dir ) as $file )
				if ( $file !== '.' && $file !== '..' )
					$total += self::scan( "$dir/$file" );

			print "$total\t$dir\n";
		}

		return $total;
	}
}

TreeSize::run( $argv );


